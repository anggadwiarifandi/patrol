---
title: Native Automation 2.0 (native2)
---

## What is native2?

<Info>
Native2 is available starting from Patrol version `3.6.0`.
</Info>

Native2 was created to address fundamental limitations in the original native automation approach. The original native API was primarily designed for Android, and attempts to make a single `Selector` work across both platforms proved problematic because:

- **Platform-specific identifiers**: iOS and Android use different identifier systems (Android's `resourceName` vs iOS's `identifier`)
- **Flaky text selectors**: Text-based selectors can be unreliable as they may change with localization or UI updates
- **Platform incompatibility**: A single selector approach couldn't effectively handle the fundamental differences between iOS and Android element identification

Native2 provides a **single command** that can work with both Android and iOS selectors, eliminating the need to write separate platform-specific code. Instead of maintaining different methods for each platform, you can now use one method that accepts platform-specific selectors that acknowledge the inherent differences between platforms.


### Before native2 (Separate Methods)

In the original native automation API, you needed separate methods for iOS and Android:

```dart
// Before: Sometimes you needed to use platform-specific if statements in your test code.
 if(Platform.Android){
  await $.native.tap(resourceId:'com.android.camera2:id/shutter_button')
 }else{
  await $.native.tap(label:'Take Picture')
 }
```
### With native2

Native2 provides a single method that works across both platforms:

```dart
// After: Single method with *platform-specific* selectors
await $.native2.tap(
  NativeSelector(
    android: AndroidSelector(
      resourceName: 'com.android.camera2:id/shutter_button',
    ),
    ios: IOSSelector(label: 'Take Picture'),
  ),
);

// Text input with unified method
await $.native2.enterText(
  NativeSelector(
    android: AndroidSelector(
      contentDescription: 'Email field',
    ),
    ios: IOSSelector(
      identifier: 'emailField',
    ),
  ),
  text: 'john@example.com',
);
```

### Text Input Operations

```dart
// Enter text in username field
await $.native2.enterText(
  NativeSelector(
    android: AndroidSelector(
      resourceName: 'username',
    ),
    ios: IOSSelector(
      identifier: 'usernameField',
    ),
  ),
  text: 'testuser@example.com',
);

// Enter password in secure field
await $.native2.enterText(
  NativeSelector(
    android: AndroidSelector(
      contentDescription: 'Password',
    ),
    ios: IOSSelector(
      elementType: IOSElementType.secureTextField,
    ),
  ),
  text: 'secretpassword',
);
```

### Native 2 supports platform specific attributes like elementType for iOS or className for Android

```dart
// Find elements by instance (when multiple elements match)
await $.native2.tap(
  NativeSelector(
    android: AndroidSelector(
      className: 'android.widget.Button',
      instance: 2, // Third button (0-indexed)
    ),
    ios: IOSSelector(
      elementType: IOSElementType.button,
      instance: 2, // Third button (0-indexed)
    ),
  ),
);

```